<!DOCTYPE html>
<html lang="{{ lang or 'en' }}" data-lang="{{ lang or 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="d7JoYGZFD3j4ovz9GDIe_fN55bDYiExfHK_jAJeZy-g" />
    <meta name="theme-color" content="#ffffff">
    
    {# Favicon #}
    <link rel="icon" type="image/x-icon" href="/assets/logo/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/logo/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo/apple-touch-icon.png">
    
    <meta name="description" content="{{ description or 'SGP Yoga Blog - Insights on yoga practice, philosophy, and community' }}">
    
    {# Open Graph / Facebook #}
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.sgpyoga.co{{ page.url }}">
    <meta property="og:title" content="{{ title or 'SGP Yoga Blog' }}">
    <meta property="og:description" content="{{ description or 'Explore yoga wisdom, practice tips, and philosophy from our teachers in Mexico City.' }}">
    <meta property="og:image" content="https://www.sgpyoga.co{{ image or '/assets/photos/social/og-blog.webp' }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="{% if lang == 'es' %}es_MX{% else %}en_US{% endif %}">
    <meta property="og:locale:alternate" content="{% if lang == 'es' %}en_US{% else %}es_MX{% endif %}">
    <meta property="og:site_name" content="SGP Yoga">
    
    {# Twitter Card #}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.sgpyoga.co{{ page.url }}">
    <meta name="twitter:title" content="{{ title or 'SGP Yoga Blog' }}">
    <meta name="twitter:description" content="{{ description or 'Explore yoga wisdom, practice tips, and philosophy from our teachers in Mexico City.' }}">
    <meta name="twitter:image" content="https://www.sgpyoga.co{{ image or '/assets/photos/social/og-blog.webp' }}">
    
    {# SEO: Canonical & Hreflang Tags #}
    <link rel="canonical" href="https://www.sgpyoga.co{{ page.url }}">
    {% if lang == 'es' %}
        {# Spanish page - link to English equivalent #}
        <link rel="alternate" hreflang="en" href="https://www.sgpyoga.co/blog/dist/{{ page.fileSlug }}.html">
        <link rel="alternate" hreflang="es" href="https://www.sgpyoga.co{{ page.url }}">
        <link rel="alternate" hreflang="x-default" href="https://www.sgpyoga.co/blog/dist/{{ page.fileSlug }}.html">
    {% else %}
        {# English page - link to Spanish equivalent #}
        <link rel="alternate" hreflang="en" href="https://www.sgpyoga.co{{ page.url }}">
        <link rel="alternate" hreflang="es" href="https://www.sgpyoga.co/blog/dist/es/{{ page.fileSlug }}.html">
        <link rel="alternate" hreflang="x-default" href="https://www.sgpyoga.co{{ page.url }}">
    {% endif %}
    
    <title>{{ title }} | SGP Yoga Blog</title>
    
    {# Resource Hints - Performance Optimization #}
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="https://unpkg.com">
    
    {# Preload critical CSS #}
    <link rel="preload" href="/css/main.css" as="style">
    <link rel="preload" href="/css/navbar.css" as="style">
    <link rel="preload" href="/css/blog.css" as="style">
    
    {# Preload critical images #}
    <link rel="preload" href="/assets/logo/logoMain-150.webp" as="image" media="(max-width: 1024px)">
    <link rel="preload" href="/assets/logo/logoMain-300.webp" as="image" media="(min-width: 1025px)">
    
    {# Performance: Preload critical fonts to prevent FOUT #}
    <link rel="preload" href="/assets/fonts/Cormorant_Garamond/static/CormorantGaramond-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="/assets/fonts/Lato/Lato-Light.ttf" as="font" type="font/ttf" crossorigin>
    
    {# Main site CSS - using copied assets from dist/ #}
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/navbar.css">
    
    {# Performance: Load below-the-fold CSS asynchronously to eliminate render blocking #}
    <link rel="stylesheet" href="/css/footer.css" media="print" onload="this.media='all'">
    
    {# Fallback for browsers with JavaScript disabled #}
    <noscript>
        <link rel="stylesheet" href="/css/footer.css">
    </noscript>
    
    <link rel="stylesheet" href="/css/blog.css">
    {% if layout == "layouts/post/standard.njk" %}
    <link rel="stylesheet" href="/css/blogPost.css">
    {% endif %}
    {% if layout == "layouts/post/longform.njk" %}
    <link rel="stylesheet" href="/css/blogPost.css">
    <link rel="stylesheet" href="/css/blogPost-longform.css">
    {% endif %}
    
    {# CRITICAL: Inline language detection to prevent layout shift and eliminate external dependency #}
    {# This runs immediately and sets language before any external JS loads #}
    <script>
        !function(){"use strict";function e(){const e=window.location.pathname;if(e.startsWith("/es/")||e.includes("/blog/dist/es/"))return"es";try{const e=localStorage.getItem("selectedLanguage");if("en"===e||"es"===e)return e}catch(e){}return(navigator.language||navigator.userLanguage||"").toLowerCase().startsWith("es")?"es":"en"}function t(e){const t=document.getElementById("currentFlag"),n=document.getElementById("currentLangCode");if(t&&n){const a={en:{flag:"ðŸ‡ºðŸ‡¸",code:"EN"},es:{flag:"ðŸ‡²ðŸ‡½",code:"ES"}}[e];a&&(t.textContent=a.flag,n.textContent=a.code)}}const n=e();document.documentElement.setAttribute("lang",n),document.documentElement.setAttribute("data-lang",n),window.__INITIAL_LANG__=n,"loading"!==document.readyState?t(n):document.addEventListener("DOMContentLoaded",(function(){t(n)}))}();
    </script>
    
    {# Performance: Defer external scripts to eliminate render blocking #}
    {# Lucide Icons #}
    <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    {# i18next for language support #}
    <script defer src="https://unpkg.com/i18next/dist/umd/i18next.min.js"></script>
    <script defer src="https://unpkg.com/i18next-browser-languagedetector/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
    
    {# Fuse.js for fuzzy search #}
    <script defer src="https://unpkg.com/fuse.js@7.0.0/dist/fuse.min.js"></script>
</head>
<body>
    {# Navigation Bar - Full navbar from main site #}
    <nav class="navbar">
        <div class="navbar-left">
            <a href="{% if lang == 'es' %}/es/index.html{% else %}/index.html{% endif %}" class="navbar-brand-link">
                <picture>
                    <source media="(min-width: 1025px)" srcset="/assets/logo/logoMain-300.webp">
                    <source media="(max-width: 1024px)" srcset="/assets/logo/logoMain-150.webp">
                    <img src="/assets/logo/logoMain.png" alt="SGP Yoga - Sat Gur Prasaad Yoga studio logo" class="navbar-logo">
                </picture>
                <span class="navbar-brand">SGP Yoga</span>
            </a>
        </div>
        
        <div class="navbar-center">
            <ul class="navbar-menu">
                <li><a href="{% if lang == 'es' %}/es/index.html{% else %}/index.html{% endif %}" class="navbar-link" data-i18n="common:nav.home">Home</a></li>
                <li><a href="{% if lang == 'es' %}/es/about.html{% else %}/about.html{% endif %}" class="navbar-link" data-i18n="common:nav.about">About</a></li>
                <li><a href="{% if lang == 'es' %}/es/classes.html{% else %}/classes.html{% endif %}" class="navbar-link" data-i18n="common:nav.classes">Classes</a></li>
                <li><a href="{% if lang == 'es' %}/es/events.html{% else %}/events.html{% endif %}" class="navbar-link" data-i18n="common:nav.events">Events</a></li>
                <li><a href="{% if lang == 'es' %}/blog/dist/es/{% else %}/blog/dist/{% endif %}" class="navbar-link active" data-i18n="common:nav.blog">Blog</a></li>
            </ul>
        </div>
        
        <div class="navbar-right">
            <div class="language-selector">
                <button class="language-toggle" id="languageToggle" aria-label="Select Language" aria-expanded="false">
                    <span class="flag-circle" id="currentFlag">ðŸ‡ºðŸ‡¸</span>
                    <span class="language-code" id="currentLangCode">EN</span>
                    <i data-lucide="chevron-down" class="dropdown-chevron"></i>
                </button>
                <div class="language-dropdown" id="languageDropdown">
                    <div class="language-option" data-lang="en">
                        <span class="flag-circle">ðŸ‡ºðŸ‡¸</span>
                        <span class="language-name">English</span>
                        <span class="language-code">(EN)</span>
                    </div>
                    <div class="language-option" data-lang="es">
                        <span class="flag-circle">ðŸ‡²ðŸ‡½</span>
                        <span class="language-name">EspaÃ±ol</span>
                        <span class="language-code">(ES)</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    {# Main content area - will be filled by child templates #}
    <main class="blog-main">
        {{ content | safe }}
    </main>

    {# Footer - Full footer from main site #}
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-grid">
                    {# Logo and Mission Section #}
                    <div class="footer-column footer-logo-section">
                        <a href="{% if lang == 'es' %}/es/index.html{% else %}/index.html{% endif %}" class="footer-logo-link">
                            <picture>
                                <source srcset="/assets/logo/logoMain-300.webp">
                                <img src="/assets/logo/logoMain.png" alt="SGP Yoga - Sat Gur Prasaad Yoga studio logo" class="footer-logo">
                            </picture>
                        </a>
                        <h3 data-i18n="common:footer.mission.title">Our Mission</h3>
                        <p class="footer-mission-text" data-i18n="common:footer.mission.text">Guiding souls to discover their inner light through the transformative practice of yoga in the heart of Mexico City.</p>
                    </div>

                    {# Site Map Section #}
                    <div class="footer-column footer-sitemap">
                        <h3 data-i18n="common:footer.sitemap.title">Site Map</h3>
                        <ul>
                            <li><a href="{% if lang == 'es' %}/es/index.html{% else %}/index.html{% endif %}" data-i18n="common:footer.sitemap.home">Home</a></li>
                            <li><a href="{% if lang == 'es' %}/es/about.html{% else %}/about.html{% endif %}" data-i18n="common:footer.sitemap.about">About</a></li>
                            <li><a href="{% if lang == 'es' %}/es/classes.html{% else %}/classes.html{% endif %}" data-i18n="common:footer.sitemap.classes">Classes</a></li>
                            <li><a href="{% if lang == 'es' %}/es/events.html{% else %}/events.html{% endif %}" data-i18n="common:footer.sitemap.events">Events</a></li>
                            <li><a href="{% if lang == 'es' %}/blog/dist/es/{% else %}/blog/dist/{% endif %}" data-i18n="common:footer.sitemap.blog">Blog</a></li>
                        </ul>
                    </div>

                    {# Bottom Row: Contact and Social #}
                    <div class="footer-bottom-row">
                        {# Contact Section #}
                        <div class="footer-column footer-contact">
                            <h3 data-i18n="common:footer.contact.title">Contact Us</h3>
                            <div class="footer-contact-item">
                                <i data-lucide="mail"></i>
                                <div>
                                    <span data-i18n="common:footer.contact.email">Email</span>:
                                    <a href="mailto:satgurprasaadyoga@gmail.com" data-i18n="common:footer.contact.emailValue">satgurprasaadyoga@gmail.com</a>
                                </div>
                            </div>
                            <div class="footer-contact-item">
                                <i data-lucide="phone"></i>
                                <div>
                                    <span data-i18n="common:footer.contact.phone">Phone</span>:
                                    <a href="tel:+525539061305" data-i18n="common:footer.contact.phoneValue">+52 55 3906 1305</a>
                                </div>
                            </div>
                        </div>

                        {# Social Media Section #}
                        <div class="footer-column footer-social">
                            <h3 data-i18n="common:footer.social.title">Follow Us</h3>
                            <div class="footer-social-links">
                                <a href="https://www.facebook.com/profile.php?id=100035570391956" class="footer-social-link" aria-label="Facebook" data-i18n-aria-label="common:footer.social.facebook">
                                    <i data-lucide="facebook"></i>
                                </a>
                                <a href="https://www.instagram.com/satgurprasaad_yoga/" class="footer-social-link" aria-label="Instagram" data-i18n-aria-label="common:footer.social.instagram">
                                    <i data-lucide="instagram"></i>
                                </a>
                                <a href="https://www.youtube.com/@satgurprasaadyoga" class="footer-social-link" aria-label="YouTube" data-i18n-aria-label="common:footer.social.youtube">
                                    <i data-lucide="youtube"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {# Copyright Bar #}
            <div class="footer-copyright">
                <p data-i18n="common:footer.copyright">Â© 2025 SAT GUR PRASAAD YOGA LLC. All rights reserved.</p>
            </div>
        </div>
    </footer>

    {# JavaScript Files #}
    <script src="/js/i18n.js"></script>
    <script src="/js/navbar.js"></script>
    {% if layout == "layouts/post/longform.njk" %}
    <script src="/js/blogPost-toc.js"></script>
    {% endif %}
</body>
</html>
