---
layout: layouts/base.njk
---

{# Long-form blog post layout with sticky table of contents
   This layout is designed for longer articles that benefit from a navigation sidebar.
   It includes a two-column layout on desktop with the TOC on the right side.
#}

<article class="post post-longform">
    {# Two-column container: TOC + content #}
    <div class="longform-wrapper">
        {# Table of Contents sidebar - LEFT SIDE #}
        <div class="longform-toc">
            {% include "components/toc.njk" %}
        </div>
        
        {# Main content column - RIGHT SIDE #}
        <div class="longform-content">
            <div class="container">
                {# Post header #}
                <header class="post-header">
                    <h1 class="post-title">{{ title }}</h1>
                    
                    <div class="post-meta">
                        <time datetime="{{ date | htmlDateString }}">
                            {% if lang == 'es' %}\n                                {{ date | readableDateES }}
                            {% else %}
                                {{ date | readableDate }}
                            {% endif %}
                        </time>
                        {% if authorName %}
                        <div class="post-card-author">
                            <span class="author-name">{{ authorName }}</span>
                            {% if authorImage %}
                            <img src="{{ authorImage }}" alt="{{ authorName }}" class="author-avatar">
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                </header>

                {# Hero image (optional) - controlled by imageDisplay property #}
                {# imageDisplay values: 'blog-card', 'blog-post', 'both' (default), 'none' #}
                {% set displayMode = imageDisplay or 'both' %}
                {% if image and (displayMode == 'blog-post' or displayMode == 'both') %}
                <figure class="post-hero">
                    <picture>
                        {% if imageHigh %}
                        <source media="(min-width: 1920px)" srcset="{{ imageHigh }}">
                        {% endif %}
                        {% if imageDesktop %}
                        <source media="(min-width: 1280px)" srcset="{{ imageDesktop }}">
                        {% endif %}
                        {% if imageTablet %}
                        <source media="(min-width: 769px)" srcset="{{ imageTablet }}">
                        {% endif %}
                        {% if imageMobile %}
                        <source media="(max-width: 768px)" srcset="{{ imageMobile }}">
                        {% endif %}
                        <img src="{{ image }}" alt="{{ imageAlt or title }}" loading="lazy"
                            {% if imagePostPosition %}style="object-position: {{ imagePostPosition }};"{% endif %}>
                    </picture>
                    {% if imageCaption %}
                        <figcaption>{{ imageCaption }}</figcaption>
                    {% endif %}
                </figure>
                {% endif %}

                {# Post content #}
                <div class="post-content">
                    {{ content | safe }}
                </div>

                {# Post footer - could include tags, share buttons, etc. #}
                <footer class="post-footer">
                    {% if tags %}
                    <div class="post-tags">
                        {% for tag in tags %}
                            <span class="tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </footer>
            </div>
        </div>
    </div>
</article>
